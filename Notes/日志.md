# 和C++期末大作业

## 数据库类的封装

 由于在登陆的时候会涉及数据库的查询，在登录之后对菜单查询也会涉及数据库的查询所以封装一个数据库类`dbconnect`是很重要的。默认使用的`MYSQL`，后期会换成`redis`。

###  成员变量

数据库中应该涉及数据库名称、用户名称和密码，我都是使用`std::string`来进行封装的，并使用`private`关键字增加封装性。并设置了一个带这三个参数的构造函数以初始化这三个`private`变量。

还有一个qt中的封装好了的数据库对象。

```c++
private:
    std::string dataBaseName; // 表示要连接mysql中的哪一个数据库
    std::string username;
    std::string password;
    QSqlDatabase db;
```

### 成员函数

#### 连接

涉及数据库的话，最重要的应该就是连接操作了，因此我设计了一个`connect`函数，它会连接指定的数据库并返回是否连接成功。这里面涉及一个`std::string`和`QString`的转变。

由于在qt中的字符串是自己封装过的类(`QString`)，可以参考[qt中QString和`std::string`的转化](https://cloud.tencent.com/developer/article/1812844)。

---

数据库的DML无非就是增删改查，由于登陆界面要使用查询，所以先完成查询函数。

#### 查询

在qt中已经为我们封装了`QSqlQuery`对象，只需要我们调用即可。